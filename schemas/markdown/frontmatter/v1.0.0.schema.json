{
  "$id": "https://schemas.arusty.dev/markdown/frontmatter/v1.0.0.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Markdown Frontmatter Schema",
  "description": "Schema for validating YAML/JSON frontmatter in AI-managed documentation files. Version 1.0.0.",
  "type": "object",
  "$defs": {
    "uuid": {
      "type": "string",
      "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
      "description": "UUID v4 format identifier"
    },
    "semver": {
      "type": "string",
      "pattern": "^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$",
      "description": "Semantic versioning format (e.g., 1.0.0, 2.1.0-beta.1)"
    },
    "author": {
      "type": "string",
      "pattern": "^.+\\s+<[^>]+>$",
      "description": "Author in 'Name <email>' format (e.g., 'John Doe <jdoe@example.com>')"
    },
    "relatedReference": {
      "oneOf": [
        {
          "type": "string",
          "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
          "description": "Local file reference (UUID v4)"
        },
        {
          "type": "string",
          "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}@[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
          "description": "Remote file reference (UUID@project-UUID)"
        },
        {
          "type": "string",
          "format": "uri",
          "pattern": "^https?://",
          "description": "External URL reference"
        }
      ],
      "description": "Reference to related content: local UUID, remote UUID@project, or URL"
    },
    "statusEmoji": {
      "type": "string",
      "pattern": "^[\\p{Emoji}]+$",
      "description": "Status indicator emoji"
    }
  },
  "properties": {
    "$schema": {
      "type": "string",
      "format": "uri",
      "description": "URI reference to the schema for validation. Use versioned URLs for stability.",
      "examples": [
        "https://schemas.arusty.dev/markdown/frontmatter/v1.0.0.schema.json",
        "https://schemas.arusty.dev/markdown/frontmatter/latest.schema.json"
      ]
    },
    "title": {
      "type": "string",
      "minLength": 1,
      "maxLength": 200,
      "description": "Document title"
    },
    "id": {
      "$ref": "#/$defs/uuid",
      "description": "Unique identifier for this document (UUID v4)"
    },
    "description": {
      "type": "string",
      "minLength": 1,
      "maxLength": 500,
      "description": "Brief description of the document content"
    },
    "version": {
      "$ref": "#/$defs/semver",
      "description": "Document version following semantic versioning"
    },
    "status": {
      "type": "string",
      "pattern": "^[\\p{Emoji}]+\\s+.+$",
      "description": "Document status with emoji prefix (e.g., 'üöß Draft', '‚úÖ Published')",
      "examples": ["üöß Draft", "‚úÖ Published", "üìù In Review", "üóëÔ∏è Deprecated"]
    },
    "tags": {
      "type": "array",
      "items": {
        "type": "string",
        "minLength": 1,
        "pattern": "^[a-z0-9][a-z0-9-]*[a-z0-9]$|^[a-z0-9]$"
      },
      "uniqueItems": true,
      "minItems": 1,
      "description": "Categorization tags (lowercase, hyphenated)",
      "examples": [["lang", "rust", "lib"], ["github", "workflows"]]
    },
    "authors": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/author"
      },
      "minItems": 1,
      "description": "List of document authors in 'Name <email>' format"
    },
    "related": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/relatedReference"
      },
      "description": "References to related documents (local UUID, remote UUID@project, or URL)"
    },
    "lastUpdated": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of last update"
    },
    "draft": {
      "type": "boolean",
      "default": false,
      "description": "Whether the document is a draft (not ready for publication)"
    },
    "type": {
      "type": "string",
      "enum": [
        "guide",
        "tutorial",
        "reference",
        "concept",
        "plan",
        "template",
        "changelog",
        "spec",
        "adr"
      ],
      "description": "Document type classification"
    },
    "license": {
      "type": "string",
      "enum": [
        "CC-BY-4.0",
        "CC-BY-SA-4.0",
        "CC0-1.0",
        "MIT",
        "GPL-3.0",
        "Apache-2.0",
        "proprietary"
      ],
      "description": "License governing the document content"
    },
    "extends": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/uuid"
      },
      "description": "List of parent document UUIDs this document extends"
    }
  },
  "required": [
    "$schema",
    "title",
    "id",
    "description",
    "version",
    "status",
    "tags",
    "authors"
  ],
  "additionalProperties": false
}
